<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Job Application Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --primary: #1976d2;
      --background-light: #f4f6fa;
      --background-dark: #121212;
      --text-light: #333;
      --text-dark: #e0e0e0;
      --card-light: #ffffff;
      --card-dark: #1e1e1e;
      --selected-light: #00bcd4;
      --selected-dark: #00e5ff;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
      background-color: var(--background-light);
      color: var(--text-light);
      transition: all 0.3s ease;
    }

    body.dark {
      background-color: var(--background-dark);
      color: var(--text-dark);
    }

    .dark .card {
      background-color: var(--card-dark);
    }

    h1.animated-heading {
      font-size: 30px;
      font-weight: 700;
      text-align: center;
      margin-bottom: 20px;
      animation: headingColorCycle 6s infinite;
      letter-spacing: 1px;
      text-transform: uppercase;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }

    @keyframes headingColorCycle {
      0%   { color: #e91e63; }
      25%  { color: #3f51b5; }
      50%  { color: #2196f3; }
      75%  { color: #4caf50; }
      100% { color: #e91e63; }
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    select, input[type="text"], button {
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      min-width: 160px;
      box-sizing: border-box;
    }

    button {
      background: var(--primary);
      color: white;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #0d47a1;
    }

    .container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 15px;
      min-height: 100px;
    }

    .card {
      background: var(--card-light);
      padding: 20px;
      border-radius: 12px;
      border: 2px solid #d0d0d0;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s, border-color 0.3s;
    }

    .card:hover {
      transform: translateY(-5px);
      border-color: var(--primary);
    }
    .card h2 {
  margin-top: 0;
  font-size: 20px;
  color: #1976d2;
   }

    .card.selected {
      border: 2px solid var(--selected-light);
      box-shadow: 0 0 10px rgba(0, 188, 212, 0.5);
      background-color: rgba(0, 188, 212, 0.05);
    }

    .dark .card.selected {
      border-color: var(--selected-dark);
      box-shadow: 0 0 12px rgba(0, 229, 255, 0.4);
      background-color: rgba(0, 229, 255, 0.08);
    }

    .info {
      font-size: 16px;
      margin: 6px 0;
    }

    .link {
      margin-top: 12px;
      display: inline-block;
      color: var(--primary);
      font-weight: bold;
      text-decoration: none;
    }

    .link:hover {
      text-decoration: underline;
    }

    .no-jobs {
      grid-column: 1 / -1;
      text-align: center;
      font-size: 18px;
      color: #999;
      padding: 40px 0;
    }

    #totalJobs {
      text-align: center;
      margin-top: 20px;
      margin-bottom: 20px; /* üëà added space below */
      font-size: 16px;
      color: #555;
    }

    .dark-toggle {
  background: transparent;
  cursor: pointer;
  font-size: 20px;
  z-index: 999;
  transition: background-color 0.3s;
  min-width: 0px;
}

.dark-toggle:hover {
  background-color: rgba(25, 118, 210, 0.15);
}


    @media (max-width: 480px) {
      select, input[type="text"], button {
        font-size: 15px;
        min-width: 100%;
      }

      .controls {
        flex-direction: column;
        align-items: stretch;
      }
    }
  </style>
</head>
<body>
  <script>
  // üîê Redirect to home if not logged in
  if (localStorage.getItem("isAuthenticated") !== "true") {
    window.location.href = "/";
  }

  // üåô Set dark mode if previously enabled
  if (localStorage.getItem("theme") === "dark") {
    document.body.classList.add("dark");
  }
</script>
  <h1 class="animated-heading">üìå Job Tracker <button class="dark-toggle" onclick="toggleDarkMode()" title="Toggle Light/Dark Mode">üåì</button></h1>

  <div class="controls">
    <input type="text" id="searchInput" placeholder="üîç Search jobs..." />
    <select id="monthFilter">
      <option value="">Month</option>
      <option value="January">January</option>
      <option value="February">February</option>
      <option value="March">March</option>
      <option value="April">April</option>
      <option value="May">May</option>
      <option value="June">June</option>
      <option value="July">July</option>
      <option value="August">August</option>
      <option value="September">September</option>
      <option value="October">October</option>
      <option value="November">November</option>
      <option value="December">December</option>
    </select>
    <select id="yearFilter">
      <option value="">Year</option>
      <option value="2025">2025</option>
      <option value="2024">2024</option>
    </select>
    <button onclick="downloadPDF()">üìÑ Export PDF</button>
  </div>

  <div id="totalJobs"></div>
  <div class="container" id="jobCards"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    const jobApplications = [
       {
        company: "https://unstop.com/c/five-9s-solutions-1477942",
        position: "Associate Software Developer",
        date: "07-07-2025",
        status: "Applied",
        location: "Hyderabad",
        url: "https://unstop.com/jobs/associate-software-developer-five-9s-solutions-india-pvt-ltd-1507607"  
      },
      {
        company: "Unnanu",
        position: "Edge Analytics Developer",
        date: "07-07-2025",
        status: "Applied",
        location: "Hyderabad",
        url: "https://unstop.com/jobs/edge-analytics-developer-unnanu-1507795"  
      },
      {
        company: "Orizn AI",
        position: "Front-End Developer",
        date: "07-07-2025",
        status: "Applied",
        location: "San Francisco, California (USA) ‚Äî on Market Street, ZIP code 94555",
        url: "https://unstop.com/jobs/frontend-developer-orizn-ai-1509639?rstatus=1"  
      },
      {
        company: "https://ssc.gov.in/",
        position: "Multi-Tasking (Non-Technical) Staff, and Havaldar (CBIC & CBN) Examination, 2025",
        date: "07-07-2025",
        status: "Pending and Application End Date 24/07/2025 (up to 11:00 PM)",
        location: "India",
        url: "https://ssc.gov.in/"  
      },
      {
        company: "https://ssc.gov.in/",
        position: "Combined Graduate Level Examination",
        date: "26-06-2025",
        status: "Applied and exam probably  13 August to 30 August 2025",
        location: "India",
        url: "https://ssc.gov.in/candidate-portal/cgl-application-form-2025/print-application/cgl25cdwcgh67y/x4az6z68b1o6jir"  
      },
      {
        company: "https://ssc.gov.in/",
        position: "Combined Higher Secondary Level (10+2) Examination 2025",
        date: "26-06-2025",
        status: "Applied and exam probably  8‚Äì18 September 2025",
        location: "India",
        url: "https://ssc.gov.in/candidate-portal/chsl-application-form-2025/print-application/chsl25m43gnv6j60/1gg8ts5g6hhz55z"  
      },
      {
        company: "https://ssc.gov.in/",
        position: "Stenographer Grade 'C' and 'D' Examination, 2025",
        date: "26-06-2025",
        status: "Applied and exam probably  6‚Äì11 August 2025",
        location: "India",
        url: "https://ssc.gov.in/candidate-portal/steno-application-form-2025/print-application/steno255ruudvfmz/xjo8n324yvavzfp"  
      },
       {
        company: "Bain & Company",
        position: "Frontend Developer",
        date: "27-06-2025",
        status: "Applied",
        location: "Bangalore",
        url: "https://careers.bain.com/jobs/Profile"
      },
      {
        company: "preplaced.in",
        position: "If you need mentor at Free Mentor",
        date: "07-07-2025",
        status: "Interested",
        location: "Remote",
        url: "https://www.preplaced.in/?utm_source=linkedin&utm_medium=inf&utm_campaign=page_home&utm_term=dsa_strategy&utm_content=ayushi_sharma"
      },
      {
        company: "HRMWARE",
        position: "Associate Software Developers",
        date: "23-06-2025",
        status: "Applied",
        location: "5th Floor, Webel IT Park, BN 9, BN Block, Sector V, Salt Lake, Kolkata - 700091",
        url: "https://www.hrmware.com/apply/form/580b103453c5c?job_post_id_120dd002oln=63b681787bb4d"
      },
      {
        company: "Google",
        position: "Frontend Developer",
        date: "07-07-2025",
        status: "Applied",
        location: "Remote",
        url: "https://careers.google.com/jobs/results/"
      },
      {
        company: "TCS",
        position: "Java Developer",
        date: "07-07-2025",
        status: "Interview Scheduled",
        location: "Kolkata",
        url: "https://www.tcs.com/careers"
      },
      {
        company: "Infosys",
        position: "Python Developer",
        date: "07-07-2025",
        status: "Pending",
        location: "Hyderabad",
        url: "https://www.infosys.com/careers/"
      },
      {
        company: "Wipro",
        position: "Frontend Developer",
        date: "07-07-2025",
        status: "Applied",
        location: "Bangalore",
        url: "https://careers.wipro.com/"
      },
      {
        company: "Capgemini",
        position: "Full Stack Developer",
        date: "07-07-2025",
        status: "Rejected",
        location: "Chennai",
        url: "https://www.capgemini.com/careers/"
      }
    ];

    const jobCards = document.getElementById('jobCards');
    const searchInput = document.getElementById('searchInput');
    const monthFilter = document.getElementById('monthFilter');
    const yearFilter = document.getElementById('yearFilter');
    const totalJobs = document.getElementById('totalJobs');
    let filteredJobs = [...jobApplications]; // Global variable to track filtered jobs
    
     function parseCustomDate(dateStr) {
      const [day, month, year] = dateStr.split("-").map(Number);
      return new Date(year, month - 1, day); // JS month is 0-indexed
    }

    function toggleDarkMode() {
  document.body.classList.toggle('dark');
  const isDark = document.body.classList.contains('dark');
  localStorage.setItem("theme", isDark ? "dark" : "light");
}

    async function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF('p', 'mm', 'a4');
    const pageWidth = doc.internal.pageSize.getWidth();
    const pageHeight = doc.internal.pageSize.getHeight();
    let y = 30;
    let currentPage = 1;

    const totalPages = Math.ceil(filteredJobs.length / 4) || 1;
    const today = new Date().toLocaleDateString();

    function addHeader() {
      doc.setFontSize(16);
      doc.setTextColor(33, 150, 243);
      doc.setFont(undefined, "bold");
      doc.text("Job Applications", pageWidth / 2, 15, { align: 'center' });

      doc.setFontSize(10);
      doc.setTextColor(100);
      doc.setFont(undefined, "normal");
      doc.text("Exported by: Pranab Mahata", pageWidth / 2, 22, { align: 'center' });

      doc.setDrawColor(180);
      doc.rect(10, 10, pageWidth - 20, pageHeight - 20);
    }

    function addFooter() {
      doc.setFontSize(10);
      doc.setTextColor(120);
      doc.text(`Page ${currentPage} of ${totalPages}`, pageWidth / 2, pageHeight - 10, { align: 'center' });
      doc.text(`Generated on: ${today}`, 14, pageHeight - 10);
    }

    function addJobCard(job, posY) {
      doc.setDrawColor(220);
      doc.setFillColor(245, 245, 245);
      doc.roundedRect(15, posY, pageWidth - 30, 50, 3, 3, 'FD');

      let innerY = posY + 7;
      const leftX = 18;

      doc.setFontSize(13);
      doc.setTextColor(0);
      doc.text(`${job.position}`, leftX, innerY); innerY += 7;

      doc.setFontSize(11);
      doc.setTextColor(80);
      doc.text(`Company: ${job.company}`, leftX, innerY); innerY += 6;
      doc.text(`Date: ${parseCustomDate(job.date).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}`, leftX, innerY); innerY += 6;
      doc.text(`Status: ${job.status}`, leftX, innerY); innerY += 6;
      doc.text(`Location: ${job.location}`, leftX, innerY); innerY += 6;

      doc.setTextColor(33, 150, 243);
      doc.textWithLink("View Job", leftX, innerY, { url: job.url });
    }

    addHeader();

    if (filteredJobs.length === 0) {
      doc.setFontSize(14);
      doc.setTextColor(150, 0, 0);
      doc.text("No job data to export based on current filters.", pageWidth / 2, y + 10, { align: 'center' });
    } else {
      for (let i = 0; i < filteredJobs.length; i++) {
        if (y > 230) {
          addFooter();
          doc.addPage();
          currentPage++;
          y = 30;
          addHeader();
        }
        addJobCard(filteredJobs[i], y);
        y += 60;
      }
    }

    addFooter();
    doc.save('job_applications.pdf');
  }
    function renderJobs(data) {
      jobCards.innerHTML = '';

      if (data.length === 0) {
  jobCards.innerHTML = `<div class="no-jobs">No Jobs Found</div>`;
  totalJobs.innerText = `Total Jobs: 0`; // üëà added
}


      data.forEach(job => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <h2>${job.position}</h2>
          <div class="info"><strong>Company:</strong> ${job.company}</div>
          <div class="info"><strong>Date:</strong> ${parseCustomDate(job.date).toDateString()}</div>
          <div class="info"><strong>Status:</strong> ${job.status}</div>
          <div class="info"><strong>Location:</strong> ${job.location}</div>
          <a href="${job.url}" target="_blank" rel="noopener noreferrer" class="link">View Job</a>
        `;
        card.addEventListener('click', () => {
          document.querySelectorAll('.card').forEach(c => c.classList.remove('selected'));
          card.classList.add('selected');
        });
        jobCards.appendChild(card);
      });

      totalJobs.innerText = `Total Jobs: ${data.length}`;
    }

    function filterJobs() {
  const searchTerm = searchInput.value.toLowerCase();
  const selectedMonth = monthFilter.value;
  const selectedYear = yearFilter.value;

  filteredJobs = jobApplications.filter(job => {
    const date = parseCustomDate(job.date);
    const month = date.toLocaleString('default', { month: 'long' });
    const year = date.getFullYear().toString();

    const matchesMonth = !selectedMonth || month === selectedMonth;
    const matchesYear = !selectedYear || year === selectedYear;
    const matchesSearch = [job.company, job.position, job.status, job.location]
      .some(field => field.toLowerCase().includes(searchTerm));

    return matchesMonth && matchesYear && matchesSearch;
  });

  renderJobs(filteredJobs);
}


    searchInput.addEventListener('input', filterJobs);
    monthFilter.addEventListener('change', filterJobs);
    yearFilter.addEventListener('change', filterJobs);

    renderJobs(jobApplications);
  </script>
</body>
</html>
